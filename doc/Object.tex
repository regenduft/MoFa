\subsection*{Mofa::Model::Object\label{Mofa::Model::Object}\index{Mofa::Model::Object}}


Basisklasse für die Klassen zur Datenbankabstraktion

\minisec{Beschreibung\label{Beschreibung}\index{Beschreibung}}


Stellt Funktionen zum Speichern und Auslesen eines Objektes
aus einer Datenbanktabelle zur Verfüngung.



Die Methoden \texttt{unquoted\_fields}, \texttt{quoted\_fields}, \texttt{foreign\_keys} und 
\texttt{table} müssen von den Klassen, die von Object erben, überladen werden.

\minisec{Skalare Attribute:\label{Skalare_Attribute:}\index{Skalare Attribute:}}


Für alle öffentlichen Attribute gibt es eine gleichnamige Methode, die
immer den Wert des Attributes zurückgibt, und den Wert
des Attributes setzt, wenn man ihr einen Parameter übergibt.



\texttt{id - (int)} Primary Key des Datensatzes zu diesem Objekt.

\minisec{Foreign-Key-Attribute\label{Foreign-Key-Attribute}\index{Foreign-Key-Attribute}}


Für alle Foreign-Key-Attribute gibt es eine gleichnamige Methode,
die den Wert des Attributes als Objekt zurückgibt, und den Wert
des Attributes setzt wenn man ihr ein Objekt oder einen Skalar,
der Primary-Key der entsprechenden Tabelle ist, übergibt.



Zusätzlich gibt es eine Methode AttributnameId(), mit der nur der
Primary-Key des Attributes zurückgegeben wird.

\minisec{Öffentliche Klassenmethoden\label{_ffentliche_Klassenmethoden}\index{Öffentliche Klassenmethoden}}
\minisec{\texttt{\$ new(\$)}\label{_new_}\index{\$ new(\$)}}


\textit{Parameter:} [Hashreferenz]



\textit{Rückgabewert:} Object-Objekt



Gibt ein neues Objekt vom Typ "Object" zurück.
Falls ein Parameter übergeben wird, werden die Attribute mit 
den im übergebenem Hash spezifizierten Werten initialisiert.

\minisec{\texttt{\$ get(\$)}\label{_get_}\index{\$ get(\$)}}


\textit{Parameter:} Id eines Datensatzes (\texttt{int})



\textit{Rückgabewert:} Object-Objekt



Liest das Objekt mit der spezifizierten Id aus der Datenbank.

\minisec{\texttt{@ get\_ids()}\label{_get_ids_}\index{@ get\ ids()}}


\textit{Rückgabewert:} Liste von Ids aller Datensätze in der Tabelle für diese Klasse (\texttt{(int,..)})



Liest alle Ids von Objekten des Typs "Object" aus der Datenbank.

\minisec{\texttt{@ create\_table()}\label{_create_table_}\index{@ create\ table()}}


\textit{Rückgabewert:} Liste von \texttt{string} mit Statusinformationen



Legt die Tabelle, in der die Objekte dieser Klasse gespeichert
werden, in der Datenbank an.

\minisec{Öffentliche Objektmethoden\label{_ffentliche_Objektmethoden}\index{Öffentliche Objektmethoden}}
\minisec{\texttt{\$ add()}\label{_add_}\index{\$ add()}}


\textit{Rückgabewert:} 1 bei Erfolg, $<$1 sonst (\texttt{int})



Fügt das Objekt zur Datenbank hinzu. Der Wert des Attributs
id wird auf die id des neuen Eintrags gesetzt.

\minisec{\texttt{\$ update(@)}\label{_update_}\index{\$ update(@)}}


\textit{Parameter:} id\_col (\texttt{string}), col\_to\_update (\texttt{string}), col\_to\_update, ...



\textit{Rückgabewert:} 1 bei Erfolg, $<$ 1 sonst (\texttt{int})



Aktualisiert alle Einträge in der Datenbank, deren Wert
für das Attribut id\_col mit dem Wert des Attributes in 
diesem Objekt übereinstimmt. 
Werden weitere Attribute angegeben, (col\_to\_update), 
werden nur diese Attribute mit den Werten dieses 
Objektes überschrieben, sonst alle.

\minisec{Protected Klassenmethoden\label{Protected_Klassenmethoden}\index{Protected Klassenmethoden}}
\minisec{\texttt{@ unquoted\_fields()}\label{_unquoted_fields_}\index{@ unquoted\ fields()}}


\textit{Rückgabewert:} Liste der Spalten, die kein Text beinhalten (\texttt{(string,..)})

\minisec{\texttt{@ quoted\_fields()}\label{_quoted_fields_}\index{@ quoted\ fields()}}


\textit{Rückgabewert:} Liste der Spalten, die Text beinhalten (\texttt{(string,..)})

\minisec{\texttt{\% foreign\_keys()}\label{_foreign_keys_}\index{\% foreign\ keys()}}


\textit{Rückgabewert:} Paare (Spalte, Tabelle) von Spalten die Foreign Key
einer anderen Tabelle sind. (\texttt{(string,string,..)})

\minisec{\texttt{@ fields()}\label{_fields_}\index{@ fields()}}


\textit{Rückgabewert:} Liste aller Spalten (\texttt{(string,..)}))

\minisec{\texttt{\$ table()}\label{_table_}\index{\$ table()}}


\textit{Rückgabewert:} Name der Tabelle, in der Objekte dieser Klasse
gespeichert werden (\texttt{string})

\minisec{\texttt{\$ dbh()}\label{_dbh_}\index{\$ dbh()}}


\textit{Rückgabewert:} Datenbankhandle auf die Datenbank, in der die
Objekte gespeichert werden.

\minisec{Protected Objektmethoden\label{Protected_Objektmethoden}\index{Protected Objektmethoden}}
\minisec{\texttt{\$ dbval(\$)}\label{_dbval_}\index{\$ dbval(\$)}}


\textit{Parameter:} Attributname



\textit{Rückgabewert:} Wert des Attributs, wie er in die Datenbank geschrieben wird.

\minisec{\texttt{\$ \_get\_set(\$@)}\label{_get_set_}\index{\$ \ get\ set(\$@)}}


\textit{Parameter:} Attributname (\texttt{string}), [Skalar]



\textit{Rückgabewert:} Wert des Attributes



Falls 2 Parameter übergeben werden, wird der 
Wert des Attributes gesetzt.

\minisec{\texttt{\$ \_get\_set\_fkey(\$\$@)}\label{_get_set_fkey_}\index{\$ \ get\ set\ fkey(\$\$@)}}


\textit{Parameter:} Attributname (\texttt{string}), Klassenname (\texttt{string}), [Skalar, Skalar]



\textit{Rückgabewert:} Wert des Attributes als Objekt des entsprechenden Typs.



Falls 4 Parameter übergeben werden, wird der letzte Parameter
als Wert des Attributes gesetzt. Der 3. Parameter wird immer ignoriert.

