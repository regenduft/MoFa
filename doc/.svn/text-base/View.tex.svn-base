\section{Mofa::View\label{Mofa::View}\index{Mofa::View}}


Stellt Funktionen zur Ausgabe von WML-Seiten zur Verfügung

\minisec{\texttt{\$ get\_link(@)}\label{_get_link_}\index{\$ get\ link(@)}}


\textit{Parameter:} Datei, auf die verlinkt werden soll (\texttt{string}),
Liste von Referenzen auf 2-Elementige Listen
mit Paaren der Form (key, value) für zu übermittelnde
Daten



\textit{Rückgabewert:} String mit Get-Link zu der angebene Seite (mit Session-Id)

\minisec{\texttt{\$ post\_link(@)}\label{_post_link_}\index{\$ post\ link(@)}}


\textit{Parameter:} Datei, auf die verlinkt werden soll (\texttt{string}),
Liste von Referenzen auf 2-Elementige Listen
mit Paaren der Form (key, value) für zu übermittelnde
Daten



\textit{Rückgabewert:} String mit Post-Link zu der angebene Seite (mit Session-Id)

\minisec{\texttt{\$ back\_link()}\label{_back_link_}\index{\$ back\ link()}}


\textit{Rückgabewert:} \texttt{string} mit zurück-Link

\minisec{\texttt{\$ logout\_link()}\label{_logout_link_}\index{\$ logout\ link()}}


\textit{Rückgabewert:} falls angemeldet: \texttt{string} mit Link um sich abzumelden;
                  sonst: leerer \texttt{string}

\minisec{\texttt{\$ card\_login()}\label{_card_login_}\index{\$ card\ login()}}


\textit{Rückgabewert:} \texttt{string} mit WML-Card: komplettes Login-Formular

\minisec{\texttt{\$ card\_anon\_start()}\label{_card_anon_start_}\index{\$ card\ anon\ start()}}


\textit{Rückgabewert:} \texttt{string} mit WML-Card:
     Startseite optimiert für nicht angemeldete Benutzer

\minisec{\texttt{\$ card\_search(\$\$\$)}\label{_card_search_}\index{\$ card\ search(\$\$\$)}}


\textit{Parameter:} Vorgaben für Startpunkte (Referenz auf Liste von \texttt{Mofa::Model::Address}-Objekten),
Vorgaben für Endpunkte (Referenz auf Liste von \texttt{Mofa::Model::Address}-Objekten),
URL an die Formular gesendet werden soll (\texttt{string})



\textit{Rückgabewert:} \texttt{string} mit WML-Card: Suchformular mit Start, Ziel, Zeit

\minisec{\texttt{\$ card\_entry(\$\$)}\label{_card_entry_}\index{\$ card\ entry(\$\$)}}


\textit{Parameter:} Vorgaben für Startpunkte (Referenz auf Liste von \texttt{Mofa::Model::Address}-Objekten)),
Vorgaben für Endpunkte (Referenz auf Liste von \texttt{Mofa::Model::Address}-Objekten),
URL an die Formular gesendet werden soll (\texttt{string})



\textit{Rückgabewert:} \texttt{string} mit WML-Card: Eingabeformular für neue MFG

\minisec{\texttt{\$card\_infos()}\label{_card_infos_}\index{\$card\ infos()}}


\textit{Rückgabewert:} \texttt{string} mit WML-Card: Infos/Impressum

\minisec{\texttt{\$ card\_bookmark()}\label{_card_bookmark_}\index{\$ card\ bookmark()}}


\textit{Rückgabewert:} \texttt{string} mit WML-Card: Enthält Link der
als Bookmark zum automatischem Login gespeichert werden kann.

\minisec{\texttt{\$ card\_personal\_menu()}\label{_card_personal_menu_}\index{\$ card\ personal\ menu()}}


\textit{Rückgabewert:} \texttt{string} mit WML-Card: Startseite nach dem Einloggen.

\minisec{\texttt{login()}\label{login_}\index{login()}}


Checks if the submitted parameters match a login-id and password from the
DB, saves the login-id to the session and prints login\_splash()
in case of success or login\_failure() if no success.

\minisec{\texttt{personal\_index()}\label{personal_index_}\index{personal\ index()}}


Gibt ein WML-Deck mit einigen WML-Cards als Startseite
nach dem einloggen aus. Falls der Benutzer nicht eingeloggt ist
wird stattdessen login\_failure() ausegegeben.

\minisec{\texttt{anon\_index()}\label{anon_index_}\index{anon\ index()}}


Gibt ein WML-Deck mit einigen Cards als allgemeine
Startseite aus. Falls logout=1 übermittelt wurde, wird
der Benutzer auch noch ausgeloggt.

\minisec{\texttt{logout()}\label{logout_}\index{logout()}}


Löscht die Session. Gibt WML-Deck aus mit der Meldung, dass man ausgeloggt wurde
und Auto-Login-Lesezeichen ungültig wurden.

\minisec{\texttt{confirm\_register()}\label{confirm_register_}\index{confirm\ register()}}


Gibt WML-Deck mit Meldung, dass Registrierung abgeschlossen ist, aus.
Leitet an search.pl weiter, wo die Suche fortgesetzt werden kann.

\minisec{\texttt{display\_map(\$\$\$\$\$\$)}\label{display_map_}\index{display\ map(\$\$\$\$\$\$)}}


\textit{Parameter:} URL zum Kartenbild (\texttt{string}), 
Parameter für dieses Bild (X, Y, Radius, Höhe, Breite) als \texttt{int}



Gibt WML-Deck aus, mit dem Bild an der angegebenen URL und Links zum auszoomen, einzoomen
und evtl. zur Navigation.

\minisec{\texttt{display\_accept(@)}\label{display_accept_}\index{display\ accept(@)}}


\textit{Parameter:} Liste von \texttt{Mapped}-Objekten



Gibt WML-Deck mit einer Übersichts-Card und einer WML-Card für
jedes Mapped-Objekt an. Bietet Optionen ein Anfrage zu aktzeptieren
oder abzulehen.

\minisec{\texttt{display\_search\_form()}\label{display_search_form_}\index{display\ search\ form()}}


Gibt WML-Deck mit einer Card mit dem Suchformular aus.

\minisec{\texttt{display\_enter\_time()}\label{display_enter_time_}\index{display\ enter\ time()}}


Gibt ein WML-Deck mit einer Card zur Eingabe der Startzeit
einer Mitfahrgelegenheit aus.

\minisec{\texttt{card\_enter\_point(\$\$\$@)}\label{card_enter_point_}\index{card\ enter\ point(\$\$\$@)}}


\textit{Parameter:} Typ des einzugebenden Punktes (start oder destination) (\texttt{string}),
Anzuzeigende Beschreibung des einzugebenden Punktes (\texttt{string}), id der Card (\texttt{string}),
Liste von \texttt{Mofa::Address}-Objekten die zur Auswahl zur Verfügung stehen.



\textit{Rückgabewert:} \texttt{string} mit einer WML-Card mit einem Formular zur
Eingabe oder Auswahl eines Treffpunktes.

\minisec{\texttt{display\_enter\_point(\$\$\$\$)}\label{display_enter_point_}\index{display\ enter\ point(\$\$\$\$)}}


\textit{Parameter:} Typ des einzugebenden Punktes (start, destination) (\texttt{string}),
je 3 Array-Referenzen auf eine Liste von \texttt{Mofa::Model::Address}-Objekten mit:
Punkten in der Umgebung, Punkten die früher schonmal gewählt wurden, geocodierten
Punkten.



Gibt eine WML-Seite zur Eingabe oder Auswahl eines Treffpunktes aus.

\minisec{\texttt{display\_search\_result()}\label{display_search_result_}\index{display\ search\ result()}}


Gibt WML-Deck mit der Aufforderung sich zu registrieren aus.

\minisec{\texttt{display\_err(@)}\label{display_err_}\index{display\ err(@)}}


\textit{Parameter}: Fehlermeldungen (\texttt{(string,..)}).



Gibt WML-Deck mit Titel Fehler und jedem übergebenem String in je einer Zeile aus.
Bittet Browser, die Seite immmer neu zu laden und nicht im Cache abzulegen.

\minisec{\texttt{display\_msg(\$@)}\label{display_msg_}\index{display\ msg(\$@)}}


\textit{Parameter}: Überschrift (\texttt{string}), Nachrichten (\texttt{(string,..)}).



Gibt WML-Deck mit dem Titel und jeder Nachricht in einer eigenen Zeile aus.
Deck wird nicht im Cache zwischengespeichert.

\minisec{\texttt{login\_splash()}\label{login_splash_}\index{login\ splash()}}


Gibt WML-Deck aus mit einer Meldung über erfolgreichen Login, und leitet sofort
an p\_index.pl weiter. Dient dazu, Login und Passwort aus der
URL zu entfernen, damit der Benutzer, falls er Lesezeichen speichert, 
nicht sein Passwort im Klartext im Lesezeichen mitspeichert.

\minisec{\texttt{login\_failure}\label{login_failure}\index{login\ failure}}


Gibt WML-Deck mit einer Fehlermeldung aus. Seite wird nicht im Cache gespeichert.

\minisec{\texttt{sendwml(@)}\label{sendwml_}\index{sendwml(@)}}


\textit{Parameter:} WML-Cards (\texttt{(string..)})



Gibt WML-Deck mit den übergebenen Cards aus.

\minisec{\texttt{sendwml(@)}\label{sendwml_}\index{sendwml(@)}}


\textit{Parameter:} WML-Cards (\texttt{(string..)})



Gibt WML-Deck mit den übergebenen Cards aus.
Deck wird nicht im Cache gespeichert, sondern immer neu geladen.

\minisec{\texttt{myparam(@)}\label{myparam_}\index{myparam(@)}}


Siehe Dokumentation der \texttt{param}-Methode des \texttt{CGI}-Moduls

